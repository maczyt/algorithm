<!DOCTYPE html>
<html>
<head>
  <title>冒泡排序</title>
  <meta name="keywords" content="JS,JavaScript,排序算法">
  <meta name="description" content="冒泡排序">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>
<script src="lib.js"></script>
<script type="text/javascript">
  var divs;
  function BubbleSort(array) {
    var arr = array.slice();
    var i, j;

    divs = render(arr);
    for (i = arr.length - 1; i > 0; i --) {
      for (j = 0; j < i; j ++) {
        if (arr[j] > arr[j+1]) {
          arr[j] = [arr[j+1], arr[j+1] = arr[j]][0];
          swap(t, divs, j, j + 1, arr[j], arr[j + 1]);
        }
      }
      (function (x) {
        t.add(function () {
          divs[x].className = 'ok';
          divs.splice(x, 1);
        })
      })(j)
    }
    t.add(function () {
      divs.forEach(function (div) {
        div.className = 'ok';
      })
    }, 0);
    t.run();
    return arr;
  }
  var t = new TimedQueue(1000);
  var arr = function () {
    var arr = [];
    for (var i = 0; i < 20; i ++) {
      arr.push(Math.floor(Math.random() * 20) + 1)
    }
    return arr;
  }();
  BubbleSort(arr)
</script>
</body>
</html>